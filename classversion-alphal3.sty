\NeedsTeXFormat{LaTeX2e}
\ProvidesExplPackage{classversion-alphal3}{2022/02/03}{v0.2.0}{Used for 
versioning classes}
\RequirePackage{xparse}
\RequirePackage{pgf}
\RequirePackage{readprov}
\RequirePackage{alphalph}

% Typesetting commands
\providecommand*{\file}[1]{\texttt {#1}}
\providecommand*{\Lpack}[1]{\textsf {#1}}

\def\classname#1{\gdef\@classname{#1} \title{Installation check and 
release information for 
\Lpack{\@classname} up to release \classversion@currentRelease}}

%Initialize property lists to store the release version, date, and 
%summary
\seq_new:c {l_@@_releaseversion_seq}
\prop_new:c {l_@@_releasedate_prop}
\prop_new:c {l_@@_releasesummary_prop}
\prop_new:c {l_@@_releasefiles_prop}

\int_zero_new:c {l_@@_releasenumber_int}


%Define \NewRelease
\NewDocumentCommand{\NewRelease}{m m O{\relax}}{
  \int_incr:c {l_@@_releasenumber_int}
  \seq_put:cn {l_@@_releaseversion_seq} {#1}
  \prop_put:cnn {l_@@_releasedate_prop} {#1} {#2}
  \prop_put:cnn {l_@@_releasesummary_prop} {#1} {#3}
  \prop_new:c
    {l_@@_releasefileversions_\alphalph{\int_use:c 
      {l_@@_releasenumber_int}}_prop}
}

%Define \IncludeFileInRelease
\NewDocumentCommand{\IncludeFileInRelease}{m m}{
  \prop_put:cnn
    {l_@@_releasefileversions_\alphalph{\int_use:c 
      {l_@@_releasenumber_int}}_prop}
    {#1} {#2}
}

%Define \thisrelease
\NewDocumentCommand{\thisreleasenumber}{O{This~release} m}{
  \section*{#1}
  \paragraph{Change summary}
  \prop_item:cn {l_@@releasesummary_prop} {\seq_item:cV 
  {l_@@_releaseversion_seq} {#2}
}


% \changes{v0.1.0}{2022/02/03}{Initial version}
% \changes{v0.2.0}{2022/02/04}{Refactored to expl}